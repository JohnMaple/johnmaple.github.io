<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 基本命令汇总 | Ethan</title>
    <meta name="description" content="Docker的三大核心概念：镜像、容器、仓库">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.5b4dd9a6.css" as="style"><link rel="preload" href="/assets/js/app.98ee12e2.js" as="script"><link rel="preload" href="/assets/js/5.fd13cd00.js" as="script"><link rel="preload" href="/assets/js/3.5d47f0b4.js" as="script"><link rel="preload" href="/assets/js/47.3f01867b.js" as="script"><link rel="preload" href="/assets/js/10.e00da3ba.js" as="script"><link rel="prefetch" href="/assets/js/1.65afdc4c.js"><link rel="prefetch" href="/assets/js/11.fbdad686.js"><link rel="prefetch" href="/assets/js/12.e56fcd63.js"><link rel="prefetch" href="/assets/js/13.ed3e80d4.js"><link rel="prefetch" href="/assets/js/14.586b8530.js"><link rel="prefetch" href="/assets/js/15.4517d850.js"><link rel="prefetch" href="/assets/js/16.fc76481c.js"><link rel="prefetch" href="/assets/js/17.44d26507.js"><link rel="prefetch" href="/assets/js/18.cf12703d.js"><link rel="prefetch" href="/assets/js/19.9dcdf451.js"><link rel="prefetch" href="/assets/js/20.ebf6cc13.js"><link rel="prefetch" href="/assets/js/21.85d3b529.js"><link rel="prefetch" href="/assets/js/22.22f68a8b.js"><link rel="prefetch" href="/assets/js/23.939c3a76.js"><link rel="prefetch" href="/assets/js/24.d37934e8.js"><link rel="prefetch" href="/assets/js/25.a3b984b6.js"><link rel="prefetch" href="/assets/js/26.f8242895.js"><link rel="prefetch" href="/assets/js/27.09a5d5f8.js"><link rel="prefetch" href="/assets/js/28.a2eeca9f.js"><link rel="prefetch" href="/assets/js/29.ff702a7d.js"><link rel="prefetch" href="/assets/js/30.fcc35648.js"><link rel="prefetch" href="/assets/js/31.46c5ef53.js"><link rel="prefetch" href="/assets/js/32.e9e387c8.js"><link rel="prefetch" href="/assets/js/33.f79bfb00.js"><link rel="prefetch" href="/assets/js/34.4d7c6fe9.js"><link rel="prefetch" href="/assets/js/35.9db05073.js"><link rel="prefetch" href="/assets/js/36.cc97cf9b.js"><link rel="prefetch" href="/assets/js/37.8474a991.js"><link rel="prefetch" href="/assets/js/38.d247686d.js"><link rel="prefetch" href="/assets/js/39.69eed42e.js"><link rel="prefetch" href="/assets/js/4.792f2236.js"><link rel="prefetch" href="/assets/js/40.a1aaef7e.js"><link rel="prefetch" href="/assets/js/41.7e10250a.js"><link rel="prefetch" href="/assets/js/42.e4512670.js"><link rel="prefetch" href="/assets/js/43.424227fb.js"><link rel="prefetch" href="/assets/js/44.4fa20a1f.js"><link rel="prefetch" href="/assets/js/45.0d191a82.js"><link rel="prefetch" href="/assets/js/46.c0887ef1.js"><link rel="prefetch" href="/assets/js/48.73d2336a.js"><link rel="prefetch" href="/assets/js/49.9c2249e9.js"><link rel="prefetch" href="/assets/js/50.b8091276.js"><link rel="prefetch" href="/assets/js/51.63dbfc04.js"><link rel="prefetch" href="/assets/js/52.a07848c4.js"><link rel="prefetch" href="/assets/js/53.d80201cb.js"><link rel="prefetch" href="/assets/js/54.f69c00e8.js"><link rel="prefetch" href="/assets/js/55.1feb89ea.js"><link rel="prefetch" href="/assets/js/56.b88c638f.js"><link rel="prefetch" href="/assets/js/57.98d313be.js"><link rel="prefetch" href="/assets/js/58.05dd3e6d.js"><link rel="prefetch" href="/assets/js/59.9357f097.js"><link rel="prefetch" href="/assets/js/6.c63c9fba.js"><link rel="prefetch" href="/assets/js/60.f59cd3aa.js"><link rel="prefetch" href="/assets/js/61.6fe786ae.js"><link rel="prefetch" href="/assets/js/62.92239f66.js"><link rel="prefetch" href="/assets/js/63.fef78eca.js"><link rel="prefetch" href="/assets/js/64.d2f56023.js"><link rel="prefetch" href="/assets/js/65.0936bacc.js"><link rel="prefetch" href="/assets/js/7.c5a3ca43.js"><link rel="prefetch" href="/assets/js/8.4dbe4324.js"><link rel="prefetch" href="/assets/js/9.b1fcbbf6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5b4dd9a6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Ethan" class="logo"> <span class="site-name can-hide">Ethan</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programming/php/algorithm.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/programming/python/" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/programming/web/es6/" class="nav-link">Web</a></li><li class="dropdown-item"><h4>Server</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/server/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/server/docker/" class="nav-link router-link-exact-active router-link-active">Docker</a></li><li class="dropdown-subitem"><a href="/server/vagrant/" class="nav-link">Vagrant</a></li><li class="dropdown-subitem"><a href="/server/mysql/" class="nav-link">Mysql</a></li></ul></li><li class="dropdown-item"><h4>Nosql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/server/redis/" class="nav-link">Redis</a></li></ul></li><li class="dropdown-item"><h4>Other</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/http/" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/other/git/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/essay/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/JohnMaple" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programming/php/algorithm.html" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/programming/python/" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/programming/web/es6/" class="nav-link">Web</a></li><li class="dropdown-item"><h4>Server</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/server/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/server/docker/" class="nav-link router-link-exact-active router-link-active">Docker</a></li><li class="dropdown-subitem"><a href="/server/vagrant/" class="nav-link">Vagrant</a></li><li class="dropdown-subitem"><a href="/server/mysql/" class="nav-link">Mysql</a></li></ul></li><li class="dropdown-item"><h4>Nosql</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/server/redis/" class="nav-link">Redis</a></li></ul></li><li class="dropdown-item"><h4>Other</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/http/" class="nav-link">HTTP</a></li><li class="dropdown-subitem"><a href="/other/git/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/essay/" class="nav-link">随笔</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/JohnMaple" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/server/docker/" class="active sidebar-link">Docker 基本命令汇总</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/docker/#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/server/docker/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/server/docker/#系统操作" class="sidebar-link">系统操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/docker/#设置docker自启动" class="sidebar-link">设置docker自启动</a></li><li class="sidebar-sub-header"><a href="/server/docker/#docker的启动、停止、重启" class="sidebar-link">docker的启动、停止、重启</a></li></ul></li><li class="sidebar-sub-header"><a href="/server/docker/#基本使用" class="sidebar-link">基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/docker/#docker镜像" class="sidebar-link">docker镜像</a></li><li class="sidebar-sub-header"><a href="/server/docker/#查看镜像" class="sidebar-link">查看镜像</a></li><li class="sidebar-sub-header"><a href="/server/docker/#docker创建一个容器" class="sidebar-link">docker创建一个容器</a></li><li class="sidebar-sub-header"><a href="/server/docker/#查看docker容器" class="sidebar-link">查看docker容器</a></li><li class="sidebar-sub-header"><a href="/server/docker/#启动、停止、重启、删除docker容器" class="sidebar-link">启动、停止、重启、删除docker容器</a></li><li class="sidebar-sub-header"><a href="/server/docker/#进入docker容器" class="sidebar-link">进入docker容器</a></li><li class="sidebar-sub-header"><a href="/server/docker/#退出容器" class="sidebar-link">退出容器</a></li><li class="sidebar-sub-header"><a href="/server/docker/#查看容器日志" class="sidebar-link">查看容器日志</a></li><li class="sidebar-sub-header"><a href="/server/docker/#docker网络操作" class="sidebar-link">Docker网络操作</a></li></ul></li><li class="sidebar-sub-header"><a href="/server/docker/#注意事项" class="sidebar-link">注意事项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/server/docker/#非root用户操作docker" class="sidebar-link">非root用户操作docker</a></li></ul></li></ul></li><li><a href="/server/docker/dockerfile.html" class="sidebar-link">Dockerfile 介绍</a></li><li><a href="/server/docker/docker-compose.html" class="sidebar-link">docker-compose编排容器</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vagrant</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="docker-基本命令汇总"><a href="#docker-基本命令汇总" aria-hidden="true" class="header-anchor">#</a> Docker 基本命令汇总</h1> <h2 id="概述"><a href="#概述" aria-hidden="true" class="header-anchor">#</a> 概述</h2> <p>Docker的三大核心概念：镜像、容器、仓库</p> <ul><li>镜像：类似虚拟机的镜像、用俗话说就是安装文件。</li> <li>容器：类似一个轻量级的沙箱，容器是从镜像创建应用运行实例，可以将其启动、开始、停止、删除、而这些容器都是相互隔离、互不可见的。</li> <li>仓库：类似代码仓库，是Docker集中存放镜像文件的场所。</li></ul> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <p><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener noreferrer">Docker 文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="系统操作"><a href="#系统操作" aria-hidden="true" class="header-anchor">#</a> 系统操作</h2> <h3 id="设置docker自启动"><a href="#设置docker自启动" aria-hidden="true" class="header-anchor">#</a> 设置docker自启动</h3> <p>安装好docker后，设置开机启动</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>systemctl <span class="token function">enable</span> docker   <span class="token comment"># 不同的操作系统，命令可能不一样</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="docker的启动、停止、重启"><a href="#docker的启动、停止、重启" aria-hidden="true" class="header-anchor">#</a> docker的启动、停止、重启</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 启动</span>
<span class="token function">service</span> docker start
<span class="token comment"># 停止</span>
<span class="token function">service</span> docker stop
<span class="token comment"># 重启</span>
<span class="token function">service</span> docker restart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="基本使用"><a href="#基本使用" aria-hidden="true" class="header-anchor">#</a> 基本使用</h2> <h3 id="docker镜像"><a href="#docker镜像" aria-hidden="true" class="header-anchor">#</a> docker镜像</h3> <h4 id="docker-search-image"><a href="#docker-search-image" aria-hidden="true" class="header-anchor">#</a> docker search <code>&lt;image&gt;</code></h4> <p>用于搜索线上镜像仓库，这样就可以搜索出在<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>上所有带redis的公共的可用镜像</p> <h4 id="docker-pull-image"><a href="#docker-pull-image" aria-hidden="true" class="header-anchor">#</a> docker pull <code>&lt;image&gt;</code></h4> <p>拉取服务器镜像仓库里的镜像</p> <blockquote><p>不指定版本,默认会下载最新的一个版本。由于官方的镜像在国外，有时网速较慢，所以推荐下载国内的镜像，比如阿里云，网易云</p></blockquote> <h4 id="docker-push"><a href="#docker-push" aria-hidden="true" class="header-anchor">#</a> docker push</h4> <p><code>docker push 远程仓库名：远程镜像标签</code>，推送本地镜像到服务器</p> <h3 id="查看镜像"><a href="#查看镜像" aria-hidden="true" class="header-anchor">#</a> 查看镜像</h3> <ul><li><p><code>docker images</code>：列出images</p></li> <li><p><code>docker images -a</code>：列出所有的images（包含历史）</p></li> <li><p><code>docker images --tree</code>：显示镜像的所有层(layer)</p></li> <li><p><code>docker rmi &lt;image ID&gt;</code>：删除一个或多个image</p></li></ul> <h3 id="docker创建一个容器"><a href="#docker创建一个容器" aria-hidden="true" class="header-anchor">#</a> docker创建一个容器</h3> <p>上面介绍了docker镜像的拉取，我们接下来看下如何创建一个容器</p> <h4 id="docker-run-命令格式"><a href="#docker-run-命令格式" aria-hidden="true" class="header-anchor">#</a> docker run <code>命令格式</code></h4> <div class="language-go line-numbers-mode"><pre class="language-go"><code>Usage<span class="token punctuation">:</span> docker run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token operator">...</span><span class="token punctuation">]</span>  
 
  <span class="token operator">-</span>d<span class="token punctuation">,</span> <span class="token operator">--</span>detach<span class="token operator">=</span><span class="token boolean">false</span>         指定容器运行于前台还是后台，默认为<span class="token boolean">false</span>   
  <span class="token operator">-</span>i<span class="token punctuation">,</span> <span class="token operator">--</span>interactive<span class="token operator">=</span><span class="token boolean">false</span>   打开STDIN，用于控制台交互  
  <span class="token operator">-</span>t<span class="token punctuation">,</span> <span class="token operator">--</span>tty<span class="token operator">=</span><span class="token boolean">false</span>            分配tty设备，该可以支持终端登录，默认为<span class="token boolean">false</span>  
  <span class="token operator">-</span>u<span class="token punctuation">,</span> <span class="token operator">--</span>user<span class="token operator">=</span><span class="token string">&quot;&quot;</span>              指定容器的用户  
  <span class="token operator">-</span>a<span class="token punctuation">,</span> <span class="token operator">--</span>attach<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            登录容器（必须是以docker run <span class="token operator">-</span>d启动的容器）
  <span class="token operator">-</span>w<span class="token punctuation">,</span> <span class="token operator">--</span>workdir<span class="token operator">=</span><span class="token string">&quot;&quot;</span>           指定容器的工作目录 
  <span class="token operator">-</span>c<span class="token punctuation">,</span> <span class="token operator">--</span>cpu<span class="token operator">-</span>shares<span class="token operator">=</span><span class="token number">0</span>        设置容器CPU权重，在CPU共享场景使用  
  <span class="token operator">-</span>e<span class="token punctuation">,</span> <span class="token operator">--</span>env<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>               指定环境变量，容器中可以使用该环境变量  
  <span class="token operator">-</span>m<span class="token punctuation">,</span> <span class="token operator">--</span>memory<span class="token operator">=</span><span class="token string">&quot;&quot;</span>            指定容器的内存上限  
  <span class="token operator">-</span>P<span class="token punctuation">,</span> <span class="token operator">--</span>publish<span class="token operator">-</span>all<span class="token operator">=</span><span class="token boolean">false</span>    指定容器暴露的端口  
  <span class="token operator">-</span>p<span class="token punctuation">,</span> <span class="token operator">--</span>publish<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>           指定容器暴露的端口 
  <span class="token operator">-</span>h<span class="token punctuation">,</span> <span class="token operator">--</span>hostname<span class="token operator">=</span><span class="token string">&quot;&quot;</span>          指定容器的主机名  
  <span class="token operator">-</span>v<span class="token punctuation">,</span> <span class="token operator">--</span>volume<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            给容器挂载存储卷，挂载到容器的某个目录  
  <span class="token operator">--</span>volumes<span class="token operator">-</span>from<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>          给容器挂载其他容器上的卷，挂载到容器的某个目录
  <span class="token operator">--</span><span class="token builtin">cap</span><span class="token operator">-</span>add<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>               添加权限，权限清单详见：http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>linux<span class="token punctuation">.</span>die<span class="token punctuation">.</span>net<span class="token operator">/</span>man<span class="token operator">/</span><span class="token number">7</span><span class="token operator">/</span>capabilities  
  <span class="token operator">--</span><span class="token builtin">cap</span><span class="token operator">-</span>drop<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>              删除权限，权限清单详见：http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>linux<span class="token punctuation">.</span>die<span class="token punctuation">.</span>net<span class="token operator">/</span>man<span class="token operator">/</span><span class="token number">7</span><span class="token operator">/</span>capabilities  
  <span class="token operator">--</span>cidfile<span class="token operator">=</span><span class="token string">&quot;&quot;</span>               运行容器后，在指定文件中写入容器PID值，一种典型的监控系统用法  
  <span class="token operator">--</span>cpuset<span class="token operator">=</span><span class="token string">&quot;&quot;</span>                设置容器可以使用哪些CPU，此参数可以用来容器独占CPU  
  <span class="token operator">--</span>device<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                添加主机设备给容器，相当于设备直通  
  <span class="token operator">--</span>dns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                   指定容器的dns服务器  
  <span class="token operator">--</span>dns<span class="token operator">-</span>search<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            指定容器的dns搜索域名，写入到容器的<span class="token operator">/</span>etc<span class="token operator">/</span>resolv<span class="token punctuation">.</span>conf文件  
  <span class="token operator">--</span>entrypoint<span class="token operator">=</span><span class="token string">&quot;&quot;</span>            覆盖image的入口点  
  <span class="token operator">--</span>env<span class="token operator">-</span>file<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>              指定环境变量文件，文件格式为每行一个环境变量  
  <span class="token operator">--</span>expose<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                指定容器暴露的端口，即修改镜像的暴露端口  
  <span class="token operator">--</span>link<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                  指定容器间的关联，使用其他容器的IP、env等信息  
  <span class="token operator">--</span>lxc<span class="token operator">-</span>conf<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>              指定容器的配置文件，只有在指定<span class="token operator">--</span>exec<span class="token operator">-</span>driver<span class="token operator">=</span>lxc时使用  
  <span class="token operator">--</span>name<span class="token operator">=</span><span class="token string">&quot;&quot;</span>                  指定容器名字，后续可以通过名字进行容器管理，links特性需要使用名字  
  <span class="token operator">--</span>net<span class="token operator">=</span><span class="token string">&quot;bridge&quot;</span>             容器网络设置<span class="token punctuation">:</span>
                                bridge 使用docker daemon指定的网桥     
                                host     <span class="token comment">//容器使用主机的网络  </span>
                                container<span class="token punctuation">:</span>NAME_or_ID  <span class="token operator">&gt;</span><span class="token comment">//使用其他容器的网路，共享IP和PORT等网络资源  </span>
                                none 容器使用自己的网络（类似<span class="token operator">--</span>net<span class="token operator">=</span>bridge），但是不进行配置 
  <span class="token operator">--</span>privileged<span class="token operator">=</span><span class="token boolean">false</span>         指定容器是否为特权容器，特权容器拥有所有的capabilities  
  <span class="token operator">--</span>restart<span class="token operator">=</span><span class="token string">&quot;no&quot;</span>             指定容器停止后的重启策略<span class="token punctuation">:</span>
                                no：容器退出时不重启  
                                on<span class="token operator">-</span>failure：容器故障退出（返回值非零）时重启 
                                always：容器退出时总是重启  
  <span class="token operator">--</span>rm<span class="token operator">=</span><span class="token boolean">false</span>                 指定容器停止后自动删除容器<span class="token punctuation">(</span>不支持以docker run <span class="token operator">-</span>d启动的容器<span class="token punctuation">)</span>  
  <span class="token operator">--</span>sig<span class="token operator">-</span>proxy<span class="token operator">=</span><span class="token boolean">true</span>           设置由代理接受并处理信号，但是SIGCHLD、SIGSTOP和SIGKILL不能被代理
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>实例：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -p 8090:8080 -p 50000:50000 --restart always --link Redis:redis --name jenkins -v /home/jenkins:/home/jenkins_home --privileged<span class="token operator">=</span>true dokcer.io/jenkins/jenkins
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>-p：把容器的8080端口映射到宿主机8090上</p></li> <li><p>-v：主机的目录/home/jenkins映射到容器的目录/home/jenkins_home</p></li> <li><p>--name：给容器起个名字jenkins，docker.io/jenkins/jenkins是你下载的镜像</p></li> <li><p>--restart：always 容器退出时总是重启</p></li> <li><p>--privileged=true：挂载主机目录Docker访问出现Permission denied的解决办法</p></li> <li><p>--link：为redis容器起个别名Redis，访问的时候使用别名Redis</p></li></ul> <h3 id="查看docker容器"><a href="#查看docker容器" aria-hidden="true" class="header-anchor">#</a> 查看docker容器</h3> <h4 id="docker-ps"><a href="#docker-ps" aria-hidden="true" class="header-anchor">#</a> docker ps</h4> <p>查看正在运行的容器</p> <h4 id="docker-ps-a"><a href="#docker-ps-a" aria-hidden="true" class="header-anchor">#</a> docker ps -a</h4> <p>查看所有容器</p> <h3 id="启动、停止、重启、删除docker容器"><a href="#启动、停止、重启、删除docker容器" aria-hidden="true" class="header-anchor">#</a> 启动、停止、重启、删除docker容器</h3> <p>根据id和name对容器进行操作</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#启动容器</span>
docker start <span class="token operator">&lt;</span>ContainerId<span class="token punctuation">(</span>或者name<span class="token punctuation">)</span><span class="token operator">&gt;</span>
<span class="token comment">#停止容器</span>
docker stop <span class="token operator">&lt;</span>ContainerId<span class="token punctuation">(</span>或者name<span class="token punctuation">)</span><span class="token operator">&gt;</span>
<span class="token comment">#重启容器</span>
docker restart <span class="token operator">&lt;</span>ContainerId<span class="token punctuation">(</span>或者name<span class="token punctuation">)</span><span class="token operator">&gt;</span>
<span class="token comment">#删除容器</span>
docker <span class="token function">rm</span> <span class="token operator">&lt;</span>ContainerId<span class="token punctuation">(</span>或者name<span class="token punctuation">)</span><span class="token operator">&gt;</span>
<span class="token comment">#删除所有容器</span>
docker <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span>docker <span class="token function">ps</span> -a -q<span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="进入docker容器"><a href="#进入docker容器" aria-hidden="true" class="header-anchor">#</a> 进入docker容器</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token function">exec</span> -it <span class="token operator">&lt;</span>ContainerId<span class="token punctuation">(</span>或者name<span class="token punctuation">)</span><span class="token operator">&gt;</span> /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="退出容器"><a href="#退出容器" aria-hidden="true" class="header-anchor">#</a> 退出容器</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 方法一</span>
<span class="token keyword">exit</span>
<span class="token comment"># 方法二</span>
ctrl+p <span class="token operator">&amp;&amp;</span> ctrl+q <span class="token punctuation">(</span>一起按，注意顺序，退出后容器依然保持启动状态<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="查看容器日志"><a href="#查看容器日志" aria-hidden="true" class="header-anchor">#</a> 查看容器日志</h3> <p><code>docker logs -f -t --tail 行数 容器名</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker logs -f -t --tail 10 redis <span class="token comment">#查看redis容器最后10行日志</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="docker网络操作"><a href="#docker网络操作" aria-hidden="true" class="header-anchor">#</a> Docker网络操作</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#在主机上创建一个网络</span>
docker network create mynet

<span class="token comment">#查看自定义bridge网络</span>
docker network inspect mynet

<span class="token comment">#移除网络要求网络中所有的容器关闭或断开与此网络的连接时，才能够使用移除命令</span>
docker network disconnet mynet 容器ID

<span class="token comment">#移除网络</span>
docker network <span class="token function">rm</span> mynet
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="注意事项"><a href="#注意事项" aria-hidden="true" class="header-anchor">#</a> 注意事项</h2> <h3 id="非root用户操作docker"><a href="#非root用户操作docker" aria-hidden="true" class="header-anchor">#</a> 非root用户操作docker</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 创建docker组</span>
<span class="token function">sudo</span> <span class="token function">groupadd</span> docker
<span class="token comment"># 将当前用户加入docker组</span>
<span class="token function">sudo</span> gpasswd -a <span class="token variable">${USER}</span> docker
<span class="token comment"># 重新启动docker服务（下面是CentOS7的命令）</span>
<span class="token function">sudo</span> <span class="token function">service</span> docker restart或sudo systemctl restart docker
<span class="token comment"># 当前用户退出系统重新登陆</span>
<span class="token function">su</span> root
<span class="token function">su</span> franson 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2 天前</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/server/linux/specially-command.html" class="prev">Linux 特殊命令</a></span> <span class="next"><a href="/server/docker/dockerfile.html">Dockerfile 介绍</a>→
      </span></p></div>  <div class="vcomment"><div id="vcomments"></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.98ee12e2.js" defer></script><script src="/assets/js/5.fd13cd00.js" defer></script><script src="/assets/js/3.5d47f0b4.js" defer></script><script src="/assets/js/47.3f01867b.js" defer></script><script src="/assets/js/10.e00da3ba.js" defer></script>
  </body>
</html>
