(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{466:function(a,s,t){"use strict";t.r(s);var n=t(8),r=Object(n.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"使用-vagrant-打造跨平台开发环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-vagrant-打造跨平台开发环境","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用 Vagrant 打造跨平台开发环境")]),a._v(" "),t("p",[a._v("Vagrant 是一款用来构建虚拟开发环境的工具，非常适合 php/python/ruby/java 这类语言开发 web 应用，“代码在我机子上运行没有问题”这种说辞将成为历史。")]),a._v(" "),t("p",[a._v("我们可以通过 Vagrant 封装一个 Linux 的开发环境，分发给团队成员。成员可以在自己喜欢的桌面系统（Mac/Windows/Linux）上开发程序，代码却能统一在封装好的环境里运行。")]),a._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("h3",{attrs:{id:"安装virtualbox"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装virtualbox","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装VirtualBox")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.virtualbox.org/wiki/Downloads",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载地址"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"安装vagrant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装vagrant","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装Vagrant")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.vagrantup.com/downloads.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载地址"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"启动第一台虚拟机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动第一台虚拟机","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动第一台虚拟机")]),a._v(" "),t("p",[a._v("在启动虚拟机之前先简单介绍下 Vagrant box：")]),a._v(" "),t("ul",[t("li",[a._v("box 是一个打包好的操作系统，是一个后缀名为 .box 的文件，其实是一个压缩包，里面包含了 Vagrant 的配置信息和 VirtualBox 的虚拟机镜像文件。")]),a._v(" "),t("li",[a._v("vagrant up 启动虚拟机是基于 box 文件的，因此在启动虚拟机前必须得把 box 文件准备好。或者也可以在启动的时候指定远程 box 地址，在这里我把 box 文件下载下来，然后启动时指定该文件。\n"),t("a",{attrs:{href:"https://app.vagrantup.com/boxes/search",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方镜像库"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"新建一个目录作为-vagrant-的工程目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建一个目录作为-vagrant-的工程目录","aria-hidden":"true"}},[a._v("#")]),a._v(" 新建一个目录作为 Vagrant 的工程目录")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p vagrant/project_name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cd")]),a._v(" vagrant/project_name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("pwd")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ~/vagrant/project_name 目录位置随便")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h3",{attrs:{id:"初始化镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 初始化镜像")]),a._v(" "),t("h4",{attrs:{id:"本地备好镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地备好镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 本地备好镜像")]),a._v(" "),t("p",[a._v("一般是基础版的ubuntu，根据你熟悉的操作系统，从镜像库下载下来。")]),a._v(" "),t("h5",{attrs:{id:"添加本地镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加本地镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加本地镜像")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("本地 box 名称")]),a._v("：自定义名称，该名称是本地 vagrant 管理时使用的名称；")]),a._v(" "),t("li",[t("code",[a._v("box 文件")]),a._v("：前面下载的 vagrant box 文件或者远程 box url 地址")])]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# vagrant box add <本地 box 名称> <box 文件>")]),a._v("\nvagrant box "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" ubuntu-server-16.04 ubuntu-server-16.04-amd64-vagrant.box\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h5",{attrs:{id:"查看镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看镜像")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("vagrant box list\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"tip custom-block"},[t("p",[a._v("接下来的步骤，参照 "),t("code",[a._v("使用镜像库初始化")])])]),a._v(" "),t("h4",{attrs:{id:"使用镜像库初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用镜像库初始化","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用镜像库初始化")]),a._v(" "),t("h5",{attrs:{id:"初始化镜像-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化镜像-2","aria-hidden":"true"}},[a._v("#")]),a._v(" 初始化镜像")]),a._v(" "),t("p",[a._v("初始化后会在当前目录生产一个 Vagrantfile 文件，里面包含了虚拟机的各种配置")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# vagrant init <本地 box 名称> ")]),a._v("\nvagrant init "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'ubuntu-server-16.04'")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("blockquote",[t("p",[t("code",[a._v("本地 box 名称")]),a._v("：若本地没有下好的镜像，默认会从"),t("a",{attrs:{href:"https://app.vagrantup.com/boxes/search",target:"_blank",rel:"noopener noreferrer"}},[a._v("远程镜像库"),t("OutboundLink")],1),a._v("下载")])]),a._v(" "),t("h5",{attrs:{id:"启动虚拟机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动虚拟机","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动虚拟机")]),a._v(" "),t("p",[a._v("启动虚拟机时会自动将当前目录（即 Vagrantfile 文件所在目录），和虚拟机的 /vagrant 目录共享")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("vagrant up\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h5",{attrs:{id:"连接虚拟机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接虚拟机","aria-hidden":"true"}},[a._v("#")]),a._v(" 连接虚拟机")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("vagrant "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h5",{attrs:{id:"查看-vagrant-共享目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-vagrant-共享目录","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看 Vagrant 共享目录")]),a._v(" "),t("p",[a._v("进入虚拟机后执行 "),t("code",[a._v("df -h")]),a._v(" 可以看到 Vagrant 默认把宿主机 "),t("code",[a._v("Vagrantfile")]),a._v(" 所在的目录和虚拟机的 "),t("code",[a._v("/vagrant")]),a._v(" 目录共享，可以通过 "),t("code",[a._v("ls /vagrant/")]),a._v(" 查看该目录内容，内容和宿主机对应目录一致")]),a._v(" "),t("h2",{attrs:{id:"配置浅析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置浅析","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置浅析")]),a._v(" "),t("p",[a._v("Vagrantfile 主要包括三个方面的配置，虚拟机的配置、SSH配置、Vagrant 的一些基础配置。Vagrant 是使用 Ruby 开发的，所以它的配置语法也是 Ruby 的，对于没有学过 Ruby 的朋友也没关系，根据例子模仿下就会了。")]),a._v(" "),t("blockquote",[t("p",[a._v("修改完配置后需要执行 "),t("code",[a._v("vagrant reload")]),a._v(" 重启 VM 使其配置生效")])]),a._v(" "),t("h3",{attrs:{id:"box-名称设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#box-名称设置","aria-hidden":"true"}},[a._v("#")]),a._v(" box 名称设置")]),a._v(" "),t("p",[t("code",[a._v('config.vm.box = "centos7"')])]),a._v(" "),t("p",[a._v("该名称是再使用 vagrant init 中后面跟的名字，那么默认就是 base。")]),a._v(" "),t("h3",{attrs:{id:"hostname-设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hostname-设置","aria-hidden":"true"}},[a._v("#")]),a._v(" hostname 设置")]),a._v(" "),t("p",[t("code",[a._v('config.vm.hostname = "node1"')])]),a._v(" "),t("p",[a._v("设置hostname非常重要，因为当我们有很多台虚拟服务器的时候，都是依靠hostname來做识别的。比如，我安装了centos1,centos2 两台虚拟机，再启动时，我可以通过vagrant up centos1来指定只启动哪一台。")]),a._v(" "),t("h3",{attrs:{id:"网络设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网络设置","aria-hidden":"true"}},[a._v("#")]),a._v(" 网络设置")]),a._v(" "),t("p",[a._v("agrant 有两种方式来进行网络连接：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("NAT")]),a._v(" : 缺省创建，用于让vm可以通过host转发访问局域网甚至互联网。")]),a._v(" "),t("li",[t("code",[a._v("host-only (主机模式)")]),a._v("：这种模式下所有的虚拟系统是可以互相通信的，但虚拟系统和真实的网络是被隔离开的，虚拟机和宿主机是可以互相通信的，相当于两台机器通过双绞线互联。")]),a._v(" "),t("li",[t("code",[a._v("Bridge(桥接模式)")]),a._v("：该模式下的 VM 就像是局域网中的一台独立的主机，可以和局域网中的任何一台机器通信，这种情况下需要手动给 VM 配 IP 地址，子网掩码等。")])]),a._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Host-only模式")]),a._v("\nconfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"private_network"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"192.168.10.11"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Bridge模式")]),a._v("\nconfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("network "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"public_network"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"10.1.2.61"')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Host-only模式下，ip不指定，采用dhcp")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# config.vm.network "private_network", type: "dhcp”')]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建一个bridge桥接网络，指定IP")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# config.vm.network "public_network", ip: "192.168.0.17"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建一个bridge桥接网络，指定桥接适配器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# config.vm.network "public_network", bridge: "en1: Wi-Fi (AirPort)"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建一个bridge桥接网络，不指定桥接适配器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# config.vm.network "public_network"')]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("h3",{attrs:{id:"同步目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#同步目录","aria-hidden":"true"}},[a._v("#")]),a._v(" 同步目录")]),a._v(" "),t("p",[a._v("前面介绍过/vagrant目录默认就是当前的开发目录，这是在虚拟机开启的时候默认挂载同步的。还可以通过配置来设置额外的同步目录")]),a._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 第一个参数是主机的目录，第二个参数是虚拟机挂载的目录")]),a._v("\nconfig"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("synced_folder  "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/Users/haohao/data"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/vagrant_data"')]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"端口转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口转发","aria-hidden":"true"}},[a._v("#")]),a._v(" 端口转发")]),a._v(" "),t("p",[a._v("对宿主机器上 8080 端口的访问请求 forward 到虚拟机的 80 端口的服务上")]),a._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[a._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("network "),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":forwarded_port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" guest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" host"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令","aria-hidden":"true"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("$ vagrant init  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 初始化")]),a._v("\n$ vagrant up  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动虚拟机")]),a._v("\n$ vagrant "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("halt")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 关闭虚拟机")]),a._v("\n$ vagrant reload  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重启虚拟机，重新载入配置文件")]),a._v("\n$ vagrant "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 登录虚拟机")]),a._v("\n$ vagrant status  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看虚拟机运行状态")]),a._v("\n$ vagrant destroy  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 销毁当前虚拟机")]),a._v("\n$ vagrant box list  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出 Vagrant 当前 box 列表")]),a._v("\n$ vagrant box remove  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除相应的 box")]),a._v("\n$ vagrant package  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 把当前的运行的虚拟机环境进行打包为 box 文件，vagrant package --output xxx.box")]),a._v("\n$ vagrant plugin  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装卸载插件")]),a._v("\n$ vagrant resume  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 恢复被挂起的状态")]),a._v("\n$ vagrant status  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 获取当前虚拟机的状态")]),a._v("\n$ vagrant "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("suspend")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 挂起当前的虚拟机")]),a._v("\n$ vagrant global-status  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看当前 vagrant 管理的所有 vm 信息")]),a._v("\n$ vagrant ssh-config  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出用于 ssh 连接的一些信息")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br")])]),t("h2",{attrs:{id:"打包分发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包分发","aria-hidden":"true"}},[a._v("#")]),a._v(" 打包分发")]),a._v(" "),t("h3",{attrs:{id:"打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包","aria-hidden":"true"}},[a._v("#")]),a._v(" 打包")]),a._v(" "),t("p",[a._v("在当前目录下，使用vagrant package打包，生成 "),t("code",[a._v(".box")]),a._v(" 镜像文件")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("$ vagrant package\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"分发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分发","aria-hidden":"true"}},[a._v("#")]),a._v(" 分发")]),a._v(" "),t("p",[a._v("打包好的 "),t("code",[a._v(".box")]),a._v(" 文件分发给别人，其他人执行下面命令，就可以得到一模一样的开发环境了")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("$ vagrant box "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" vnmp ~/box/package.box  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 添加 package.box 镜像并命名为 vnmp")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cd")]),a._v(" ~/dev  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 切换到项目目录")]),a._v("\n$ vagrant init vnmp  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用 vnmp 镜像初始化。")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h2",{attrs:{id:"集成预安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成预安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 集成预安装")]),a._v(" "),t("p",[a._v("从上面这条看下来，你会发现每次都修改了一点点内容，再打包分发给其他用户其实很麻烦。为此 Vagrant 还提供了更为便捷的预安装定制。打开 "),t("code",[a._v("Vagrantfile")]),a._v(" 文件末尾处有下面被注释的代码:")]),a._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[a._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("provision "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"shell"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" inline"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SHELL")]),a._v("\n   apt"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("get update\n   apt"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("get install "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("y apache2\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("SHELL")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("这段代码就是让你在初次运行 vagrant up 后，虚拟机创建过程众自动运行的初始化命令。 取消注释，把要预先安装的 php/mysql/redis 和配置之类的通通都写进去。初始化时这些程序都会根据你写好的方法安装并配置。")]),a._v(" "),t("p",[a._v("如果你不是初次运行，同时又修改了这里的命令，想让系统再次运行这里面的命令，你可以使用 "),t("code",[a._v("vagrant reload --provision")]),a._v(" 进行重载。所以在这种情况下，你只要将 "),t("code",[a._v("Vagrantfile")]),a._v(" 共享给团队的其他成员就可以了，其他成员运行相同的命令即可，是不是比打包分发要方便许多。")]),a._v(" "),t("p",[a._v("你还可以把要运行的命令单独写在一个文件里存放在相同的目录下，比如 bootstrap.sh：")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#!/usr/bin/env bash")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y apache2\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" -L /var/www "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf /var/www\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" -fs /vagrant /var/www\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("p",[a._v("然后在 Vagrantfile 里这样添加：")]),a._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("Vagrant")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("configure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("config"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n  config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("box "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hashicorp/precise64"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n\n  config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("provision "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"shell"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bootstrap.sh"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 添加这行")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("p",[a._v("效果和直接写在 Vagrantfile 是一样的。")]),a._v(" "),t("h2",{attrs:{id:"启动虚拟机集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动虚拟机集群","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动虚拟机集群")]),a._v(" "),t("p",[a._v("前面我们都是通过一个 Vagrantfile 配置启动单台机器，如果我们要启动一个集群，那么可以把需要的节点在一个 Vagrantfile 写好，然后直接就可以通过 vagrant up 同时启动多个 VM 组成一个集群。以下示例配置一个 web 节点和一个 db 节点，两个节点在同一个网段，并且使用同一个 box 启动：")]),a._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("Vagrant")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("configure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("config"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n  config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("define "),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":web")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("web"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n    web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("provider "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"virtualbox"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("v"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n          v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("customize "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"modifyvm"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"web"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--memory"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"512"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n    web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("box "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ubuntu-server-16.04"')]),a._v("\n    web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hostname "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"web"')]),a._v("\n    web"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("network "),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":private_network")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"11.11.1.1"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n\n  config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("define "),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":db")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("db"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n    db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("provider "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"virtualbox"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("do")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("v"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n          v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("customize "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"modifyvm"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"db"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--memory"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"512"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n    db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("box "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ubuntu-server-16.04"')]),a._v("\n    db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hostname "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"db"')]),a._v("\n    db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("vm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("network "),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v(":private_network")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"11.11.1.2"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("end")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br")])]),t("h2",{attrs:{id:"注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意事项","aria-hidden":"true"}},[a._v("#")]),a._v(" 注意事项")]),a._v(" "),t("p",[a._v("使用 Apache/Nginx 时会出现诸如图片修改后但页面刷新仍然是旧文件的情况，是由于 VirtualBox 的一个 BUG 造成的。需要对虚拟机里的 Apache/Nginx 配置文件进行修改：")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Apache 配置（httpd.conf 或者 apache.conf）修改：")]),a._v("\nEnableSendfile off\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Nginx 配置（nginx.conf）修改：")]),a._v("\nsendfile off"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])])])},[],!1,null,null,null);s.default=r.exports}}]);