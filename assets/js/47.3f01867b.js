(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{454:function(s,a,t){"use strict";t.r(a);var r=t(8),e=Object(r.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"docker-基本命令汇总"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-基本命令汇总","aria-hidden":"true"}},[s._v("#")]),s._v(" Docker 基本命令汇总")]),s._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("p",[s._v("Docker的三大核心概念：镜像、容器、仓库")]),s._v(" "),t("ul",[t("li",[s._v("镜像：类似虚拟机的镜像、用俗话说就是安装文件。")]),s._v(" "),t("li",[s._v("容器：类似一个轻量级的沙箱，容器是从镜像创建应用运行实例，可以将其启动、开始、停止、删除、而这些容器都是相互隔离、互不可见的。")]),s._v(" "),t("li",[s._v("仓库：类似代码仓库，是Docker集中存放镜像文件的场所。")])]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 文档"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"系统操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统操作","aria-hidden":"true"}},[s._v("#")]),s._v(" 系统操作")]),s._v(" "),t("h3",{attrs:{id:"设置docker自启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置docker自启动","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置docker自启动")]),s._v(" "),t("p",[s._v("安装好docker后，设置开机启动")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("systemctl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable")]),s._v(" docker   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不同的操作系统，命令可能不一样")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"docker的启动、停止、重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker的启动、停止、重启","aria-hidden":"true"}},[s._v("#")]),s._v(" docker的启动、停止、重启")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" docker start\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" docker stop\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" docker restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"基本使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本使用","aria-hidden":"true"}},[s._v("#")]),s._v(" 基本使用")]),s._v(" "),t("h3",{attrs:{id:"docker镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像","aria-hidden":"true"}},[s._v("#")]),s._v(" docker镜像")]),s._v(" "),t("h4",{attrs:{id:"docker-search-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-search-image","aria-hidden":"true"}},[s._v("#")]),s._v(" docker search "),t("code",[s._v("<image>")])]),s._v(" "),t("p",[s._v("用于搜索线上镜像仓库，这样就可以搜索出在"),t("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker Hub"),t("OutboundLink")],1),s._v("上所有带redis的公共的可用镜像")]),s._v(" "),t("h4",{attrs:{id:"docker-pull-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-pull-image","aria-hidden":"true"}},[s._v("#")]),s._v(" docker pull "),t("code",[s._v("<image>")])]),s._v(" "),t("p",[s._v("拉取服务器镜像仓库里的镜像")]),s._v(" "),t("blockquote",[t("p",[s._v("不指定版本,默认会下载最新的一个版本。由于官方的镜像在国外，有时网速较慢，所以推荐下载国内的镜像，比如阿里云，网易云")])]),s._v(" "),t("h4",{attrs:{id:"docker-push"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-push","aria-hidden":"true"}},[s._v("#")]),s._v(" docker push")]),s._v(" "),t("p",[t("code",[s._v("docker push 远程仓库名：远程镜像标签")]),s._v("，推送本地镜像到服务器")]),s._v(" "),t("h3",{attrs:{id:"查看镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看镜像","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看镜像")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("docker images")]),s._v("：列出images")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("docker images -a")]),s._v("：列出所有的images（包含历史）")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("docker images --tree")]),s._v("：显示镜像的所有层(layer)")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("docker rmi <image ID>")]),s._v("：删除一个或多个image")])])]),s._v(" "),t("h3",{attrs:{id:"docker创建一个容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker创建一个容器","aria-hidden":"true"}},[s._v("#")]),s._v(" docker创建一个容器")]),s._v(" "),t("p",[s._v("上面介绍了docker镜像的拉取，我们接下来看下如何创建一个容器")]),s._v(" "),t("h4",{attrs:{id:"docker-run-命令格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-run-命令格式","aria-hidden":"true"}},[s._v("#")]),s._v(" docker run "),t("code",[s._v("命令格式")])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("Usage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" IMAGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COMMAND"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ARG"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("detach"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("         指定容器运行于前台还是后台，默认为"),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("interactive"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   打开STDIN，用于控制台交互  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("tty"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("            分配tty设备，该可以支持终端登录，默认为"),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("              指定容器的用户  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("attach"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("            登录容器（必须是以docker run "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d启动的容器）\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("w"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("workdir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("           指定容器的工作目录 \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cpu"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("shares"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        设置容器CPU权重，在CPU共享场景使用  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("               指定环境变量，容器中可以使用该环境变量  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("memory"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("            指定容器的内存上限  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("P"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("publish"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("all"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("    指定容器暴露的端口  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("publish"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("           指定容器暴露的端口 \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("hostname"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("          指定容器的主机名  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("volume"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("            给容器挂载存储卷，挂载到容器的某个目录  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("volumes"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("from"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("          给容器挂载其他容器上的卷，挂载到容器的某个目录\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("cap")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("add"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("               添加权限，权限清单详见：http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("die"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("man"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("capabilities  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("cap")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("drop"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("              删除权限，权限清单详见：http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("die"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("man"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("capabilities  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cidfile"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("               运行容器后，在指定文件中写入容器PID值，一种典型的监控系统用法  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("cpuset"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("                设置容器可以使用哪些CPU，此参数可以用来容器独占CPU  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("device"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                添加主机设备给容器，相当于设备直通  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("dns"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                   指定容器的dns服务器  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("dns"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("search"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("            指定容器的dns搜索域名，写入到容器的"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("resolv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf文件  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("entrypoint"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("            覆盖image的入口点  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("              指定环境变量文件，文件格式为每行一个环境变量  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("expose"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                指定容器暴露的端口，即修改镜像的暴露端口  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                  指定容器间的关联，使用其他容器的IP、env等信息  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("lxc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("conf"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("              指定容器的配置文件，只有在指定"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("exec"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("driver"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("lxc时使用  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("                  指定容器名字，后续可以通过名字进行容器管理，links特性需要使用名字  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),s._v("             容器网络设置"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                                bridge 使用docker daemon指定的网桥     \n                                host     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//容器使用主机的网络  ")]),s._v("\n                                container"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("NAME_or_ID  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使用其他容器的网路，共享IP和PORT等网络资源  ")]),s._v("\n                                none 容器使用自己的网络（类似"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("net"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("bridge），但是不进行配置 \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("privileged"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("         指定容器是否为特权容器，特权容器拥有所有的capabilities  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v("             指定容器停止后的重启策略"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                                no：容器退出时不重启  \n                                on"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("failure：容器故障退出（返回值非零）时重启 \n                                always：容器退出时总是重启  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("rm"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("                 指定容器停止后自动删除容器"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("不支持以docker run "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d启动的容器"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("sig"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("proxy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("           设置由代理接受并处理信号，但是SIGCHLD、SIGSTOP和SIGKILL不能被代理\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br")])]),t("p",[s._v("实例：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker run -p 8090:8080 -p 50000:50000 --restart always --link Redis:redis --name jenkins -v /home/jenkins:/home/jenkins_home --privileged"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true dokcer.io/jenkins/jenkins\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("-p：把容器的8080端口映射到宿主机8090上")])]),s._v(" "),t("li",[t("p",[s._v("-v：主机的目录/home/jenkins映射到容器的目录/home/jenkins_home")])]),s._v(" "),t("li",[t("p",[s._v("--name：给容器起个名字jenkins，docker.io/jenkins/jenkins是你下载的镜像")])]),s._v(" "),t("li",[t("p",[s._v("--restart：always 容器退出时总是重启")])]),s._v(" "),t("li",[t("p",[s._v("--privileged=true：挂载主机目录Docker访问出现Permission denied的解决办法")])]),s._v(" "),t("li",[t("p",[s._v("--link：为redis容器起个别名Redis，访问的时候使用别名Redis")])])]),s._v(" "),t("h3",{attrs:{id:"查看docker容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看docker容器","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看docker容器")]),s._v(" "),t("h4",{attrs:{id:"docker-ps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-ps","aria-hidden":"true"}},[s._v("#")]),s._v(" docker ps")]),s._v(" "),t("p",[s._v("查看正在运行的容器")]),s._v(" "),t("h4",{attrs:{id:"docker-ps-a"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-ps-a","aria-hidden":"true"}},[s._v("#")]),s._v(" docker ps -a")]),s._v(" "),t("p",[s._v("查看所有容器")]),s._v(" "),t("h3",{attrs:{id:"启动、停止、重启、删除docker容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动、停止、重启、删除docker容器","aria-hidden":"true"}},[s._v("#")]),s._v(" 启动、停止、重启、删除docker容器")]),s._v(" "),t("p",[s._v("根据id和name对容器进行操作")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动容器")]),s._v("\ndocker start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ContainerId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或者name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止容器")]),s._v("\ndocker stop "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ContainerId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或者name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启容器")]),s._v("\ndocker restart "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ContainerId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或者name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除容器")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ContainerId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或者name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除所有容器")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a -q"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"进入docker容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入docker容器","aria-hidden":"true"}},[s._v("#")]),s._v(" 进入docker容器")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),s._v(" -it "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ContainerId"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("或者name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"退出容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#退出容器","aria-hidden":"true"}},[s._v("#")]),s._v(" 退出容器")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方法一")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方法二")]),s._v("\nctrl+p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ctrl+q "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("一起按，注意顺序，退出后容器依然保持启动状态"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"查看容器日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器日志","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看容器日志")]),s._v(" "),t("p",[t("code",[s._v("docker logs -f -t --tail 行数 容器名")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker logs -f -t --tail 10 redis "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看redis容器最后10行日志")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"docker网络操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker网络操作","aria-hidden":"true"}},[s._v("#")]),s._v(" Docker网络操作")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在主机上创建一个网络")]),s._v("\ndocker network create mynet\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看自定义bridge网络")]),s._v("\ndocker network inspect mynet\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#移除网络要求网络中所有的容器关闭或断开与此网络的连接时，才能够使用移除命令")]),s._v("\ndocker network disconnet mynet 容器ID\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#移除网络")]),s._v("\ndocker network "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" mynet\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意事项","aria-hidden":"true"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),t("h3",{attrs:{id:"非root用户操作docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#非root用户操作docker","aria-hidden":"true"}},[s._v("#")]),s._v(" 非root用户操作docker")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建docker组")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" docker\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将当前用户加入docker组")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" gpasswd -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${USER}")]),s._v(" docker\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重新启动docker服务（下面是CentOS7的命令）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" docker restart或sudo systemctl restart docker\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前用户退出系统重新登陆")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" root\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" franson \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])])},[],!1,null,null,null);a.default=e.exports}}]);